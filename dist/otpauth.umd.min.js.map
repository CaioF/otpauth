{"version":3,"file":"otpauth.umd.min.js","sources":["../src/utils.js","../node_modules/jssha/dist/sha.mjs","../src/crypto.js","../src/secret.js","../src/otp.js","../src/uri.js","../src/version.js"],"sourcesContent":["/**\n * An object containing some utilities.\n * @type {Object}\n */\nexport const Utils = {\n\n\t/**\n\t * UInt conversion.\n\t * @type {Object}\n\t */\n\tuint: {\n\n\t\t/**\n\t\t * Converts an ArrayBuffer to an integer.\n\t\t * @param {ArrayBuffer} buf ArrayBuffer.\n\t\t * @returns {number} Integer.\n\t\t */\n\t\tfromBuf: buf => {\n\t\t\tconst arr = new Uint8Array(buf);\n\t\t\tlet num = 0;\n\n\t\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\t\tif (arr[i] !== 0) {\n\t\t\t\t\tnum *= 256;\n\t\t\t\t\tnum += arr[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn num;\n\t\t},\n\n\t\t/**\n\t\t * Converts an integer to an ArrayBuffer.\n\t\t * @param {number} num Integer.\n\t\t * @returns {ArrayBuffer} ArrayBuffer.\n\t\t */\n\t\ttoBuf: num => {\n\t\t\tconst buf = new ArrayBuffer(8);\n\t\t\tconst arr = new Uint8Array(buf);\n\t\t\tlet acc = num;\n\n\t\t\tfor (let i = 7; i >= 0; i--) {\n\t\t\t\tif (acc === 0) break;\n\n\t\t\t\tarr[i] = acc & 255;\n\t\t\t\tacc -= arr[i];\n\t\t\t\tacc /= 256;\n\t\t\t}\n\n\t\t\treturn buf;\n\t\t}\n\n\t},\n\n\t/**\n\t * Raw string conversion.\n\t * @type {Object}\n\t */\n\traw: {\n\n\t\t/**\n\t\t * Converts an ArrayBuffer to a string.\n\t\t * @param {ArrayBuffer} buf ArrayBuffer.\n\t\t * @returns {string} String.\n\t\t */\n\t\tfromBuf: buf => {\n\t\t\tconst arr = new Uint8Array(buf);\n\t\t\tlet str = '';\n\n\t\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\t\tstr += String.fromCharCode(arr[i]);\n\t\t\t}\n\n\t\t\treturn str;\n\t\t},\n\n\t\t/**\n\t\t * Converts a string to an ArrayBuffer.\n\t\t * @param {string} str String.\n\t\t * @returns {ArrayBuffer} ArrayBuffer.\n\t\t */\n\t\ttoBuf: str => {\n\t\t\tconst buf = new ArrayBuffer(str.length);\n\t\t\tconst arr = new Uint8Array(buf);\n\n\t\t\tfor (let i = 0; i < str.length; i++) {\n\t\t\t\tarr[i] = str.charCodeAt(i);\n\t\t\t}\n\n\t\t\treturn buf;\n\t\t}\n\n\t},\n\n\t/**\n\t * Base32 string conversion.\n\t * @type {Object}\n\t */\n\tb32: {\n\n\t\t/**\n\t\t * RFC 4648 base32 alphabet without pad.\n\t\t * @type {string}\n\t\t */\n\t\talphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567',\n\n\t\t/**\n\t\t * Converts an ArrayBuffer to a base32 string (RFC 4648)\n\t\t * (https://github.com/LinusU/base32-encode).\n\t\t * @param {ArrayBuffer} buf ArrayBuffer.\n\t\t * @returns {string} Base32 string.\n\t\t */\n\t\tfromBuf: buf => {\n\t\t\tconst arr = new Uint8Array(buf);\n\n\t\t\tlet bits = 0;\n\t\t\tlet value = 0;\n\t\t\tlet str = '';\n\n\t\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\t\tvalue = (value << 8) | arr[i];\n\t\t\t\tbits += 8;\n\n\t\t\t\twhile (bits >= 5) {\n\t\t\t\t\tstr += Utils.b32.alphabet[(value >>> bits - 5) & 31];\n\t\t\t\t\tbits -= 5;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (bits > 0) {\n\t\t\t\tstr += Utils.b32.alphabet[(value << 5 - bits) & 31];\n\t\t\t}\n\n\t\t\treturn str;\n\t\t},\n\n\t\t/**\n\t\t * Converts a base32 string to an ArrayBuffer (RFC 4648)\n\t\t * (https://github.com/LinusU/base32-decode).\n\t\t * @param {string} str Base32 string.\n\t\t * @returns {ArrayBuffer} ArrayBuffer.\n\t\t */\n\t\ttoBuf: str => {\n\t\t\t// Canonicalize to all upper case and remove padding if it exists.\n\t\t\tstr = str.toUpperCase().replace(/=+$/, '');\n\n\t\t\tconst buf = new ArrayBuffer((str.length * 5) / 8 | 0);\n\t\t\tconst arr = new Uint8Array(buf);\n\n\t\t\tlet bits = 0;\n\t\t\tlet value = 0;\n\t\t\tlet index = 0;\n\n\t\t\tfor (let i = 0; i < str.length; i++) {\n\t\t\t\tconst idx = Utils.b32.alphabet.indexOf(str[i]);\n\t\t\t\tif (idx === -1) throw new TypeError(`Invalid character found: ${str[i]}`);\n\n\t\t\t\tvalue = (value << 5) | idx;\n\t\t\t\tbits += 5;\n\n\t\t\t\tif (bits >= 8) {\n\t\t\t\t\tarr[index++] = (value >>> bits - 8) & 255;\n\t\t\t\t\tbits -= 8;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn buf;\n\t\t}\n\n\t},\n\n\t/**\n\t * Hexadecimal string conversion.\n\t * @type {Object}\n\t */\n\thex: {\n\n\t\t/**\n\t\t * Converts an ArrayBuffer to a hexadecimal string.\n\t\t * @param {ArrayBuffer} buf ArrayBuffer.\n\t\t * @returns {string} Hexadecimal string.\n\t\t */\n\t\tfromBuf: buf => {\n\t\t\tconst arr = new Uint8Array(buf);\n\t\t\tlet str = '';\n\n\t\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\t\tconst hex = arr[i].toString(16);\n\t\t\t\tstr += hex.length === 2 ? hex : `0${hex}`;\n\t\t\t}\n\n\t\t\treturn str.toUpperCase();\n\t\t},\n\n\t\t/**\n\t\t * Converts a hexadecimal string to an ArrayBuffer.\n\t\t * @param {string} str Hexadecimal string.\n\t\t * @returns {ArrayBuffer} ArrayBuffer.\n\t\t */\n\t\ttoBuf: str => {\n\t\t\tconst buf = new ArrayBuffer(str.length / 2);\n\t\t\tconst arr = new Uint8Array(buf);\n\n\t\t\tfor (let i = 0, j = 0; i < arr.length; i += 1, j += 2) {\n\t\t\t\tarr[i] = parseInt(str.substr(j, 2), 16);\n\t\t\t}\n\n\t\t\treturn buf;\n\t\t}\n\n\t},\n\n\t/**\n\t * Pads a number with leading zeros.\n\t * @param {number|string} num Number.\n\t * @param {number} digits Digits.\n\t * @returns {string} Padded number.\n\t */\n\tpad: (num, digits) => {\n\t\tlet prefix = '';\n\t\tlet repeat = digits - String(num).length;\n\t\twhile (repeat-- > 0) prefix += '0';\n\t\treturn `${prefix}${num}`;\n\t}\n\n};\n\n/**\n * An object containing some utilities (for internal use only).\n * @private\n * @type {Object}\n */\nexport const InternalUtils = {\n\n\t/**\n\t * \"globalThis\" ponyfill\n\t * (https://mathiasbynens.be/notes/globalthis).\n\t * @type {Object}\n\t */\n\tget globalThis() {\n\t\tlet _globalThis;\n\n\t\t/* eslint-disable no-extend-native, no-restricted-globals, no-undef */\n\t\tif (typeof globalThis === 'object') {\n\t\t\t_globalThis = globalThis;\n\t\t} else {\n\t\t\tObject.defineProperty(Object.prototype, '__magicalGlobalThis__', {\n\t\t\t\tget() { return this; },\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t\ttry {\n\t\t\t\t_globalThis = __magicalGlobalThis__;\n\t\t\t} finally {\n\t\t\t\tdelete Object.prototype.__magicalGlobalThis__;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof _globalThis === 'undefined') {\n\t\t\t// Still unable to determine \"globalThis\", fall back to a naive method.\n\t\t\tif (typeof self !== 'undefined') {\n\t\t\t\t_globalThis = self;\n\t\t\t} else if (typeof window !== 'undefined') {\n\t\t\t\t_globalThis = window;\n\t\t\t} else if (typeof global !== 'undefined') {\n\t\t\t\t_globalThis = global;\n\t\t\t}\n\t\t}\n\t\t/* eslint-enable */\n\n\t\tObject.defineProperty(this, 'globalThis', {\n\t\t\tenumerable: true,\n\t\t\tvalue: _globalThis\n\t\t});\n\n\t\treturn this.globalThis;\n\t},\n\n\t/**\n\t * \"console\" ponyfill.\n\t * @type {Object}\n\t */\n\tget console() {\n\t\tconst _console = {};\n\n\t\tconst methods = [\n\t\t\t'assert', 'clear', 'context', 'count', 'countReset', 'debug', 'dir', 'dirxml',\n\t\t\t'error', 'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log', 'profile',\n\t\t\t'profileEnd', 'table', 'time', 'timeEnd', 'timeLog', 'timeStamp', 'trace', 'warn'\n\t\t];\n\n\t\tif (typeof InternalUtils.globalThis.console === 'object') {\n\t\t\tfor (const method of methods) {\n\t\t\t\t_console[method] = typeof InternalUtils.globalThis.console[method] === 'function'\n\t\t\t\t\t? InternalUtils.globalThis.console[method]\n\t\t\t\t\t: () => {};\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const method of methods) {\n\t\t\t\t_console[method] = () => {};\n\t\t\t}\n\t\t}\n\n\t\tObject.defineProperty(this, 'console', {\n\t\t\tenumerable: true,\n\t\t\tvalue: _console\n\t\t});\n\n\t\treturn this.console;\n\t},\n\n\t/**\n\t * Detect if running in \"Node.js\".\n\t * @type {boolean}\n\t */\n\tget isNode() {\n\t\tconst _isNode = Object.prototype.toString.call(InternalUtils.globalThis.process) === '[object process]';\n\n\t\tObject.defineProperty(this, 'isNode', {\n\t\t\tenumerable: true,\n\t\t\tvalue: _isNode\n\t\t});\n\n\t\treturn this.isNode;\n\t},\n\n\t/**\n\t * Dynamically import \"Node.js\" modules.\n\t * (`eval` is used to prevent bundlers from including the module,\n\t * e.g., [webpack/webpack#8826](https://github.com/webpack/webpack/issues/8826))\n\t * @type {Function}\n\t */\n\tget nodeRequire() {\n\t\tconst _nodeRequire = InternalUtils.isNode\n\t\t\t// eslint-disable-next-line no-eval\n\t\t\t? eval('require')\n\t\t\t: () => {};\n\n\t\tObject.defineProperty(this, 'nodeRequire', {\n\t\t\tenumerable: true,\n\t\t\tvalue: _nodeRequire\n\t\t});\n\n\t\treturn this.nodeRequire;\n\t}\n\n};\n","/**\n * A JavaScript implementation of the SHA family of hashes - defined in FIPS PUB 180-4, FIPS PUB 202,\n * and SP 800-185 - as well as the corresponding HMAC implementation as defined in FIPS PUB 198-1.\n *\n * Copyright 2008-2020 Brian Turek, 1998-2009 Paul Johnston & Contributors\n * Distributed under the BSD License\n * See http://caligatio.github.com/jsSHA/ for more information\n */\nconst t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";function n(t,n,e,r){let i,s,o;const h=n||[0],u=(e=e||0)>>>3,w=-1===r?3:0;for(i=0;i<t.length;i+=1)o=i+u,s=o>>>2,h.length<=s&&h.push(0),h[s]|=t[i]<<8*(w+r*(o%4));return{value:h,binLen:8*t.length+e}}function e(e,r,i){switch(r){case\"UTF8\":case\"UTF16BE\":case\"UTF16LE\":break;default:throw new Error(\"encoding must be UTF8, UTF16BE, or UTF16LE\")}switch(e){case\"HEX\":return function(t,n,e){return function(t,n,e,r){let i,s,o,h;if(0!=t.length%2)throw new Error(\"String of HEX type must be in byte increments\");const u=n||[0],w=(e=e||0)>>>3,c=-1===r?3:0;for(i=0;i<t.length;i+=2){if(s=parseInt(t.substr(i,2),16),isNaN(s))throw new Error(\"String of HEX type contains invalid characters\");for(h=(i>>>1)+w,o=h>>>2;u.length<=o;)u.push(0);u[o]|=s<<8*(c+r*(h%4))}return{value:u,binLen:4*t.length+e}}(t,n,e,i)};case\"TEXT\":return function(t,n,e){return function(t,n,e,r,i){let s,o,h,u,w,c,f,a,l=0;const A=e||[0],E=(r=r||0)>>>3;if(\"UTF8\"===n)for(f=-1===i?3:0,h=0;h<t.length;h+=1)for(s=t.charCodeAt(h),o=[],128>s?o.push(s):2048>s?(o.push(192|s>>>6),o.push(128|63&s)):55296>s||57344<=s?o.push(224|s>>>12,128|s>>>6&63,128|63&s):(h+=1,s=65536+((1023&s)<<10|1023&t.charCodeAt(h)),o.push(240|s>>>18,128|s>>>12&63,128|s>>>6&63,128|63&s)),u=0;u<o.length;u+=1){for(c=l+E,w=c>>>2;A.length<=w;)A.push(0);A[w]|=o[u]<<8*(f+i*(c%4)),l+=1}else for(f=-1===i?2:0,a=\"UTF16LE\"===n&&1!==i||\"UTF16LE\"!==n&&1===i,h=0;h<t.length;h+=1){for(s=t.charCodeAt(h),!0===a&&(u=255&s,s=u<<8|s>>>8),c=l+E,w=c>>>2;A.length<=w;)A.push(0);A[w]|=s<<8*(f+i*(c%4)),l+=2}return{value:A,binLen:8*l+r}}(t,r,n,e,i)};case\"B64\":return function(n,e,r){return function(n,e,r,i){let s,o,h,u,w,c,f,a=0;const l=e||[0],A=(r=r||0)>>>3,E=-1===i?3:0,H=n.indexOf(\"=\");if(-1===n.search(/^[a-zA-Z0-9=+/]+$/))throw new Error(\"Invalid character in base-64 string\");if(n=n.replace(/=/g,\"\"),-1!==H&&H<n.length)throw new Error(\"Invalid '=' found in base-64 string\");for(o=0;o<n.length;o+=4){for(w=n.substr(o,4),u=0,h=0;h<w.length;h+=1)s=t.indexOf(w.charAt(h)),u|=s<<18-6*h;for(h=0;h<w.length-1;h+=1){for(f=a+A,c=f>>>2;l.length<=c;)l.push(0);l[c]|=(u>>>16-8*h&255)<<8*(E+i*(f%4)),a+=1}}return{value:l,binLen:8*a+r}}(n,e,r,i)};case\"BYTES\":return function(t,n,e){return function(t,n,e,r){let i,s,o,h;const u=n||[0],w=(e=e||0)>>>3,c=-1===r?3:0;for(s=0;s<t.length;s+=1)i=t.charCodeAt(s),h=s+w,o=h>>>2,u.length<=o&&u.push(0),u[o]|=i<<8*(c+r*(h%4));return{value:u,binLen:8*t.length+e}}(t,n,e,i)};case\"ARRAYBUFFER\":try{new ArrayBuffer(0)}catch(t){throw new Error(\"ARRAYBUFFER not supported by this environment\")}return function(t,e,r){return function(t,e,r,i){return n(new Uint8Array(t),e,r,i)}(t,e,r,i)};case\"UINT8ARRAY\":try{new Uint8Array(0)}catch(t){throw new Error(\"UINT8ARRAY not supported by this environment\")}return function(t,e,r){return n(t,e,r,i)};default:throw new Error(\"format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY\")}}function r(n,e,r,i){switch(n){case\"HEX\":return function(t){return function(t,n,e,r){let i,s,o=\"\";const h=n/8,u=-1===e?3:0;for(i=0;i<h;i+=1)s=t[i>>>2]>>>8*(u+e*(i%4)),o+=\"0123456789abcdef\".charAt(s>>>4&15)+\"0123456789abcdef\".charAt(15&s);return r.outputUpper?o.toUpperCase():o}(t,e,r,i)};case\"B64\":return function(n){return function(n,e,r,i){let s,o,h,u,w,c=\"\";const f=e/8,a=-1===r?3:0;for(s=0;s<f;s+=3)for(u=s+1<f?n[s+1>>>2]:0,w=s+2<f?n[s+2>>>2]:0,h=(n[s>>>2]>>>8*(a+r*(s%4))&255)<<16|(u>>>8*(a+r*((s+1)%4))&255)<<8|w>>>8*(a+r*((s+2)%4))&255,o=0;o<4;o+=1)c+=8*s+6*o<=e?t.charAt(h>>>6*(3-o)&63):i.b64Pad;return c}(n,e,r,i)};case\"BYTES\":return function(t){return function(t,n,e){let r,i,s=\"\";const o=n/8,h=-1===e?3:0;for(r=0;r<o;r+=1)i=t[r>>>2]>>>8*(h+e*(r%4))&255,s+=String.fromCharCode(i);return s}(t,e,r)};case\"ARRAYBUFFER\":try{new ArrayBuffer(0)}catch(t){throw new Error(\"ARRAYBUFFER not supported by this environment\")}return function(t){return function(t,n,e){let r;const i=n/8,s=new ArrayBuffer(i),o=new Uint8Array(s),h=-1===e?3:0;for(r=0;r<i;r+=1)o[r]=t[r>>>2]>>>8*(h+e*(r%4))&255;return s}(t,e,r)};case\"UINT8ARRAY\":try{new Uint8Array(0)}catch(t){throw new Error(\"UINT8ARRAY not supported by this environment\")}return function(t){return function(t,n,e){let r;const i=n/8,s=-1===e?3:0,o=new Uint8Array(i);for(r=0;r<i;r+=1)o[r]=t[r>>>2]>>>8*(s+e*(r%4))&255;return o}(t,e,r)};default:throw new Error(\"format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY\")}}const i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],o=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],h=\"Chosen SHA variant is not supported\";function u(t,n){let e,r;const i=t.binLen>>>3,s=n.binLen>>>3,o=i<<3,h=4-i<<3;if(i%4!=0){for(e=0;e<s;e+=4)r=i+e>>>2,t.value[r]|=n.value[e>>>2]<<o,t.value.push(0),t.value[r+1]|=n.value[e>>>2]>>>h;return(t.value.length<<2)-4>=s+i&&t.value.pop(),{value:t.value,binLen:t.binLen+n.binLen}}return{value:t.value.concat(n.value),binLen:t.binLen+n.binLen}}function w(t){const n={outputUpper:!1,b64Pad:\"=\",outputLen:-1},e=t||{},r=\"Output length must be a multiple of 8\";if(n.outputUpper=e.outputUpper||!1,e.b64Pad&&(n.b64Pad=e.b64Pad),e.outputLen){if(e.outputLen%8!=0)throw new Error(r);n.outputLen=e.outputLen}else if(e.shakeLen){if(e.shakeLen%8!=0)throw new Error(r);n.outputLen=e.shakeLen}if(\"boolean\"!=typeof n.outputUpper)throw new Error(\"Invalid outputUpper formatting option\");if(\"string\"!=typeof n.b64Pad)throw new Error(\"Invalid b64Pad formatting option\");return n}function c(t,n,r,i){const s=t+\" must include a value and format\";if(!n){if(!i)throw new Error(s);return i}if(void 0===n.value||!n.format)throw new Error(s);return e(n.format,n.encoding||\"UTF8\",r)(n.value)}class f{constructor(t,n,e){const r=e||{};if(this.t=n,this.i=r.encoding||\"UTF8\",this.numRounds=r.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error(\"numRounds must a integer >= 1\");this.s=t,this.o=[],this.h=0,this.u=!1,this.l=0,this.A=!1,this.H=[],this.S=[]}update(t){let n,e=0;const r=this.p>>>5,i=this.m(t,this.o,this.h),s=i.binLen,o=i.value,h=s>>>5;for(n=0;n<h;n+=r)e+this.p<=s&&(this.C=this.R(o.slice(n,n+r),this.C),e+=this.p);this.l+=e,this.o=o.slice(e>>>5),this.h=s%this.p,this.u=!0}getHash(t,n){let e,i,s=this.U;const o=w(n);if(this.v){if(-1===o.outputLen)throw new Error(\"Output length must be specified in options\");s=o.outputLen}const h=r(t,s,this.K,o);if(this.A&&this.T)return h(this.T(o));for(i=this.F(this.o.slice(),this.h,this.l,this.g(this.C),s),e=1;e<this.numRounds;e+=1)this.v&&s%32!=0&&(i[i.length-1]&=16777215>>>24-s%32),i=this.F(i,s,0,this.B(this.s),s);return h(i)}setHMACKey(t,n,r){if(!this.L)throw new Error(\"Variant does not support HMAC\");if(this.u)throw new Error(\"Cannot set MAC key after calling update\");const i=e(n,(r||{}).encoding||\"UTF8\",this.K);this.M(i(t))}M(t){const n=this.p>>>3,e=n/4-1;let r;if(1!==this.numRounds)throw new Error(\"Cannot set numRounds with MAC\");if(this.A)throw new Error(\"MAC key already set\");for(n<t.binLen/8&&(t.value=this.F(t.value,t.binLen,0,this.B(this.s),this.U));t.value.length<=e;)t.value.push(0);for(r=0;r<=e;r+=1)this.H[r]=909522486^t.value[r],this.S[r]=1549556828^t.value[r];this.C=this.R(this.H,this.C),this.l=this.p,this.A=!0}getHMAC(t,n){const e=w(n);return r(t,this.U,this.K,e)(this.k())}k(){let t;if(!this.A)throw new Error(\"Cannot call getHMAC without first setting MAC key\");const n=this.F(this.o.slice(),this.h,this.l,this.g(this.C),this.U);return t=this.R(this.S,this.B(this.s)),t=this.F(n,this.U,this.p,t,this.U),t}}function a(t,n){return t<<n|t>>>32-n}function l(t,n){return t>>>n|t<<32-n}function A(t,n){return t>>>n}function E(t,n,e){return t^n^e}function H(t,n,e){return t&n^~t&e}function S(t,n,e){return t&n^t&e^n&e}function b(t){return l(t,2)^l(t,13)^l(t,22)}function p(t,n){const e=(65535&t)+(65535&n);return(65535&(t>>>16)+(n>>>16)+(e>>>16))<<16|65535&e}function d(t,n,e,r){const i=(65535&t)+(65535&n)+(65535&e)+(65535&r);return(65535&(t>>>16)+(n>>>16)+(e>>>16)+(r>>>16)+(i>>>16))<<16|65535&i}function m(t,n,e,r,i){const s=(65535&t)+(65535&n)+(65535&e)+(65535&r)+(65535&i);return(65535&(t>>>16)+(n>>>16)+(e>>>16)+(r>>>16)+(i>>>16)+(s>>>16))<<16|65535&s}function C(t){return l(t,7)^l(t,18)^A(t,3)}function y(t){return l(t,6)^l(t,11)^l(t,25)}function R(t){return[1732584193,4023233417,2562383102,271733878,3285377520]}function U(t,n){let e,r,i,s,o,h,u;const w=[];for(e=n[0],r=n[1],i=n[2],s=n[3],o=n[4],u=0;u<80;u+=1)w[u]=u<16?t[u]:a(w[u-3]^w[u-8]^w[u-14]^w[u-16],1),h=u<20?m(a(e,5),H(r,i,s),o,1518500249,w[u]):u<40?m(a(e,5),E(r,i,s),o,1859775393,w[u]):u<60?m(a(e,5),S(r,i,s),o,2400959708,w[u]):m(a(e,5),E(r,i,s),o,3395469782,w[u]),o=s,s=i,i=a(r,30),r=e,e=h;return n[0]=p(e,n[0]),n[1]=p(r,n[1]),n[2]=p(i,n[2]),n[3]=p(s,n[3]),n[4]=p(o,n[4]),n}function v(t,n,e,r){let i;const s=15+(n+65>>>9<<4),o=n+e;for(;t.length<=s;)t.push(0);for(t[n>>>5]|=128<<24-n%32,t[s]=4294967295&o,t[s-1]=o/4294967296|0,i=0;i<t.length;i+=16)r=U(t.slice(i,i+16),r);return r}class K extends f{constructor(t,n,r){if(\"SHA-1\"!==t)throw new Error(h);super(t,n,r);const i=r||{};this.L=!0,this.T=this.k,this.K=-1,this.m=e(this.t,this.i,this.K),this.R=U,this.g=function(t){return t.slice()},this.B=R,this.F=v,this.C=[1732584193,4023233417,2562383102,271733878,3285377520],this.p=512,this.U=160,this.v=!1,i.hmacKey&&this.M(c(\"hmacKey\",i.hmacKey,this.K))}}function T(t){let n;return n=\"SHA-224\"==t?s.slice():o.slice(),n}function F(t,n){let e,r,s,o,h,u,w,c,f,a,E;const R=[];for(e=n[0],r=n[1],s=n[2],o=n[3],h=n[4],u=n[5],w=n[6],c=n[7],E=0;E<64;E+=1)R[E]=E<16?t[E]:d(l(U=R[E-2],17)^l(U,19)^A(U,10),R[E-7],C(R[E-15]),R[E-16]),f=m(c,y(h),H(h,u,w),i[E],R[E]),a=p(b(e),S(e,r,s)),c=w,w=u,u=h,h=p(o,f),o=s,s=r,r=e,e=p(f,a);var U;return n[0]=p(e,n[0]),n[1]=p(r,n[1]),n[2]=p(s,n[2]),n[3]=p(o,n[3]),n[4]=p(h,n[4]),n[5]=p(u,n[5]),n[6]=p(w,n[6]),n[7]=p(c,n[7]),n}class g extends f{constructor(t,n,r){if(\"SHA-224\"!==t&&\"SHA-256\"!==t)throw new Error(h);super(t,n,r);const i=r||{};this.T=this.k,this.L=!0,this.K=-1,this.m=e(this.t,this.i,this.K),this.R=F,this.g=function(t){return t.slice()},this.B=T,this.F=function(n,e,r,i){return function(t,n,e,r,i){let s,o;const h=15+(n+65>>>9<<4),u=n+e;for(;t.length<=h;)t.push(0);for(t[n>>>5]|=128<<24-n%32,t[h]=4294967295&u,t[h-1]=u/4294967296|0,s=0;s<t.length;s+=16)r=F(t.slice(s,s+16),r);return o=\"SHA-224\"===i?[r[0],r[1],r[2],r[3],r[4],r[5],r[6]]:r,o}(n,e,r,i,t)},this.C=T(t),this.p=512,this.U=\"SHA-224\"===t?224:256,this.v=!1,i.hmacKey&&this.M(c(\"hmacKey\",i.hmacKey,this.K))}}class B{constructor(t,n){this.Y=t,this.N=n}}function L(t,n){let e;return n>32?(e=64-n,new B(t.N<<n|t.Y>>>e,t.Y<<n|t.N>>>e)):0!==n?(e=32-n,new B(t.Y<<n|t.N>>>e,t.N<<n|t.Y>>>e)):t}function M(t,n){let e;return n<32?(e=32-n,new B(t.Y>>>n|t.N<<e,t.N>>>n|t.Y<<e)):(e=64-n,new B(t.N>>>n|t.Y<<e,t.Y>>>n|t.N<<e))}function k(t,n){return new B(t.Y>>>n,t.N>>>n|t.Y<<32-n)}function Y(t,n,e){return new B(t.Y&n.Y^t.Y&e.Y^n.Y&e.Y,t.N&n.N^t.N&e.N^n.N&e.N)}function N(t){const n=M(t,28),e=M(t,34),r=M(t,39);return new B(n.Y^e.Y^r.Y,n.N^e.N^r.N)}function I(t,n){let e,r;e=(65535&t.N)+(65535&n.N),r=(t.N>>>16)+(n.N>>>16)+(e>>>16);const i=(65535&r)<<16|65535&e;e=(65535&t.Y)+(65535&n.Y)+(r>>>16),r=(t.Y>>>16)+(n.Y>>>16)+(e>>>16);return new B((65535&r)<<16|65535&e,i)}function X(t,n,e,r){let i,s;i=(65535&t.N)+(65535&n.N)+(65535&e.N)+(65535&r.N),s=(t.N>>>16)+(n.N>>>16)+(e.N>>>16)+(r.N>>>16)+(i>>>16);const o=(65535&s)<<16|65535&i;i=(65535&t.Y)+(65535&n.Y)+(65535&e.Y)+(65535&r.Y)+(s>>>16),s=(t.Y>>>16)+(n.Y>>>16)+(e.Y>>>16)+(r.Y>>>16)+(i>>>16);return new B((65535&s)<<16|65535&i,o)}function z(t,n,e,r,i){let s,o;s=(65535&t.N)+(65535&n.N)+(65535&e.N)+(65535&r.N)+(65535&i.N),o=(t.N>>>16)+(n.N>>>16)+(e.N>>>16)+(r.N>>>16)+(i.N>>>16)+(s>>>16);const h=(65535&o)<<16|65535&s;s=(65535&t.Y)+(65535&n.Y)+(65535&e.Y)+(65535&r.Y)+(65535&i.Y)+(o>>>16),o=(t.Y>>>16)+(n.Y>>>16)+(e.Y>>>16)+(r.Y>>>16)+(i.Y>>>16)+(s>>>16);return new B((65535&o)<<16|65535&s,h)}function x(t,n){return new B(t.Y^n.Y,t.N^n.N)}function _(t){const n=M(t,19),e=M(t,61),r=k(t,6);return new B(n.Y^e.Y^r.Y,n.N^e.N^r.N)}function O(t){const n=M(t,1),e=M(t,8),r=k(t,7);return new B(n.Y^e.Y^r.Y,n.N^e.N^r.N)}function P(t){const n=M(t,14),e=M(t,18),r=M(t,41);return new B(n.Y^e.Y^r.Y,n.N^e.N^r.N)}const V=[new B(i[0],3609767458),new B(i[1],602891725),new B(i[2],3964484399),new B(i[3],2173295548),new B(i[4],4081628472),new B(i[5],3053834265),new B(i[6],2937671579),new B(i[7],3664609560),new B(i[8],2734883394),new B(i[9],1164996542),new B(i[10],1323610764),new B(i[11],3590304994),new B(i[12],4068182383),new B(i[13],991336113),new B(i[14],633803317),new B(i[15],3479774868),new B(i[16],2666613458),new B(i[17],944711139),new B(i[18],2341262773),new B(i[19],2007800933),new B(i[20],1495990901),new B(i[21],1856431235),new B(i[22],3175218132),new B(i[23],2198950837),new B(i[24],3999719339),new B(i[25],766784016),new B(i[26],2566594879),new B(i[27],3203337956),new B(i[28],1034457026),new B(i[29],2466948901),new B(i[30],3758326383),new B(i[31],168717936),new B(i[32],1188179964),new B(i[33],1546045734),new B(i[34],1522805485),new B(i[35],2643833823),new B(i[36],2343527390),new B(i[37],1014477480),new B(i[38],1206759142),new B(i[39],344077627),new B(i[40],1290863460),new B(i[41],3158454273),new B(i[42],3505952657),new B(i[43],106217008),new B(i[44],3606008344),new B(i[45],1432725776),new B(i[46],1467031594),new B(i[47],851169720),new B(i[48],3100823752),new B(i[49],1363258195),new B(i[50],3750685593),new B(i[51],3785050280),new B(i[52],3318307427),new B(i[53],3812723403),new B(i[54],2003034995),new B(i[55],3602036899),new B(i[56],1575990012),new B(i[57],1125592928),new B(i[58],2716904306),new B(i[59],442776044),new B(i[60],593698344),new B(i[61],3733110249),new B(i[62],2999351573),new B(i[63],3815920427),new B(3391569614,3928383900),new B(3515267271,566280711),new B(3940187606,3454069534),new B(4118630271,4000239992),new B(116418474,1914138554),new B(174292421,2731055270),new B(289380356,3203993006),new B(460393269,320620315),new B(685471733,587496836),new B(852142971,1086792851),new B(1017036298,365543100),new B(1126000580,2618297676),new B(1288033470,3409855158),new B(1501505948,4234509866),new B(1607167915,987167468),new B(1816402316,1246189591)];function Z(t){return\"SHA-384\"===t?[new B(3418070365,s[0]),new B(1654270250,s[1]),new B(2438529370,s[2]),new B(355462360,s[3]),new B(1731405415,s[4]),new B(41048885895,s[5]),new B(3675008525,s[6]),new B(1203062813,s[7])]:[new B(o[0],4089235720),new B(o[1],2227873595),new B(o[2],4271175723),new B(o[3],1595750129),new B(o[4],2917565137),new B(o[5],725511199),new B(o[6],4215389547),new B(o[7],327033209)]}function j(t,n){let e,r,i,s,o,h,u,w,c,f,a,l;const A=[];for(e=n[0],r=n[1],i=n[2],s=n[3],o=n[4],h=n[5],u=n[6],w=n[7],a=0;a<80;a+=1)a<16?(l=2*a,A[a]=new B(t[l],t[l+1])):A[a]=X(_(A[a-2]),A[a-7],O(A[a-15]),A[a-16]),c=z(w,P(o),(H=h,S=u,new B((E=o).Y&H.Y^~E.Y&S.Y,E.N&H.N^~E.N&S.N)),V[a],A[a]),f=I(N(e),Y(e,r,i)),w=u,u=h,h=o,o=I(s,c),s=i,i=r,r=e,e=I(c,f);var E,H,S;return n[0]=I(e,n[0]),n[1]=I(r,n[1]),n[2]=I(i,n[2]),n[3]=I(s,n[3]),n[4]=I(o,n[4]),n[5]=I(h,n[5]),n[6]=I(u,n[6]),n[7]=I(w,n[7]),n}class q extends f{constructor(t,n,r){if(\"SHA-384\"!==t&&\"SHA-512\"!==t)throw new Error(h);super(t,n,r);const i=r||{};this.T=this.k,this.L=!0,this.K=-1,this.m=e(this.t,this.i,this.K),this.R=j,this.g=function(t){return t.slice()},this.B=Z,this.F=function(n,e,r,i){return function(t,n,e,r,i){let s,o;const h=31+(n+129>>>10<<5),u=n+e;for(;t.length<=h;)t.push(0);for(t[n>>>5]|=128<<24-n%32,t[h]=4294967295&u,t[h-1]=u/4294967296|0,s=0;s<t.length;s+=32)r=j(t.slice(s,s+32),r);return o=\"SHA-384\"===i?[(r=r)[0].Y,r[0].N,r[1].Y,r[1].N,r[2].Y,r[2].N,r[3].Y,r[3].N,r[4].Y,r[4].N,r[5].Y,r[5].N]:[r[0].Y,r[0].N,r[1].Y,r[1].N,r[2].Y,r[2].N,r[3].Y,r[3].N,r[4].Y,r[4].N,r[5].Y,r[5].N,r[6].Y,r[6].N,r[7].Y,r[7].N],o}(n,e,r,i,t)},this.C=Z(t),this.p=1024,this.U=\"SHA-384\"===t?384:512,this.v=!1,i.hmacKey&&this.M(c(\"hmacKey\",i.hmacKey,this.K))}}const D=[new B(0,1),new B(0,32898),new B(2147483648,32906),new B(2147483648,2147516416),new B(0,32907),new B(0,2147483649),new B(2147483648,2147516545),new B(2147483648,32777),new B(0,138),new B(0,136),new B(0,2147516425),new B(0,2147483658),new B(0,2147516555),new B(2147483648,139),new B(2147483648,32905),new B(2147483648,32771),new B(2147483648,32770),new B(2147483648,128),new B(0,32778),new B(2147483648,2147483658),new B(2147483648,2147516545),new B(2147483648,32896),new B(0,2147483649),new B(2147483648,2147516424)],G=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function J(t){let n;const e=[];for(n=0;n<5;n+=1)e[n]=[new B(0,0),new B(0,0),new B(0,0),new B(0,0),new B(0,0)];return e}function Q(t){let n;const e=[];for(n=0;n<5;n+=1)e[n]=t[n].slice();return e}function W(t,n){let e,r,i,s;const o=[],h=[];if(null!==t)for(r=0;r<t.length;r+=2)n[(r>>>1)%5][(r>>>1)/5|0]=x(n[(r>>>1)%5][(r>>>1)/5|0],new B(t[r+1],t[r]));for(e=0;e<24;e+=1){for(s=J(),r=0;r<5;r+=1)o[r]=(u=n[r][0],w=n[r][1],c=n[r][2],f=n[r][3],a=n[r][4],new B(u.Y^w.Y^c.Y^f.Y^a.Y,u.N^w.N^c.N^f.N^a.N));for(r=0;r<5;r+=1)h[r]=x(o[(r+4)%5],L(o[(r+1)%5],1));for(r=0;r<5;r+=1)for(i=0;i<5;i+=1)n[r][i]=x(n[r][i],h[r]);for(r=0;r<5;r+=1)for(i=0;i<5;i+=1)s[i][(2*r+3*i)%5]=L(n[r][i],G[r][i]);for(r=0;r<5;r+=1)for(i=0;i<5;i+=1)n[r][i]=x(s[r][i],new B(~s[(r+1)%5][i].Y&s[(r+2)%5][i].Y,~s[(r+1)%5][i].N&s[(r+2)%5][i].N));n[0][0]=x(n[0][0],D[e])}var u,w,c,f,a;return n}function $(t){let n,e,r=0;const i=[0,0],s=[4294967295&t,t/4294967296&2097151];for(n=6;n>=0;n--)e=s[n>>2]>>>8*n&255,0===e&&0===r||(i[r+1>>2]|=e<<8*(r+1),r+=1);return r=0!==r?r:1,i[0]|=r,{value:r+1>4?i:[i[0]],binLen:8+8*r}}function tt(t){return u($(t.binLen),t)}function nt(t,n){let e,r=$(n);r=u(r,t);const i=n>>>2,s=(i-r.value.length%i)%i;for(e=0;e<s;e++)r.value.push(0);return r.value}class et extends f{constructor(t,n,r){let i=6,s=0;super(t,n,r);const o=r||{};if(1!==this.numRounds){if(o.kmacKey||o.hmacKey)throw new Error(\"Cannot set numRounds with MAC\");if(\"CSHAKE128\"===this.s||\"CSHAKE256\"===this.s)throw new Error(\"Cannot set numRounds for CSHAKE variants\")}switch(this.K=1,this.m=e(this.t,this.i,this.K),this.R=W,this.g=Q,this.B=J,this.C=J(),this.v=!1,t){case\"SHA3-224\":this.p=s=1152,this.U=224,this.L=!0,this.T=this.k;break;case\"SHA3-256\":this.p=s=1088,this.U=256,this.L=!0,this.T=this.k;break;case\"SHA3-384\":this.p=s=832,this.U=384,this.L=!0,this.T=this.k;break;case\"SHA3-512\":this.p=s=576,this.U=512,this.L=!0,this.T=this.k;break;case\"SHAKE128\":i=31,this.p=s=1344,this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case\"SHAKE256\":i=31,this.p=s=1088,this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case\"KMAC128\":i=4,this.p=s=1344,this.I(r),this.U=-1,this.v=!0,this.L=!1,this.T=this.X;break;case\"KMAC256\":i=4,this.p=s=1088,this.I(r),this.U=-1,this.v=!0,this.L=!1,this.T=this.X;break;case\"CSHAKE128\":this.p=s=1344,i=this._(r),this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case\"CSHAKE256\":this.p=s=1088,i=this._(r),this.U=-1,this.v=!0,this.L=!1,this.T=null;break;default:throw new Error(h)}this.F=function(t,n,e,r,o){return function(t,n,e,r,i,s,o){let h,u,w=0;const c=[],f=i>>>5,a=n>>>5;for(h=0;h<a&&n>=i;h+=f)r=W(t.slice(h,h+f),r),n-=i;for(t=t.slice(h),n%=i;t.length<f;)t.push(0);for(h=n>>>3,t[h>>2]^=s<<h%4*8,t[f-1]^=2147483648,r=W(t,r);32*c.length<o&&(u=r[w%5][w/5|0],c.push(u.N),!(32*c.length>=o));)c.push(u.Y),w+=1,0==64*w%i&&(W(null,r),w=0);return c}(t,n,0,r,s,i,o)},o.hmacKey&&this.M(c(\"hmacKey\",o.hmacKey,this.K))}_(t,n){const e=function(t){const n=t||{};return{funcName:c(\"funcName\",n.funcName,1,{value:[],binLen:0}),customization:c(\"Customization\",n.customization,1,{value:[],binLen:0})}}(t||{});n&&(e.funcName=n);const r=u(tt(e.funcName),tt(e.customization));if(0!==e.customization.binLen||0!==e.funcName.binLen){const t=nt(r,this.p>>>3);for(let n=0;n<t.length;n+=this.p>>>5)this.C=this.R(t.slice(n,n+(this.p>>>5)),this.C),this.l+=this.p;return 4}return 31}I(t){const n=function(t){const n=t||{};return{kmacKey:c(\"kmacKey\",n.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:c(\"Customization\",n.customization,1,{value:[],binLen:0})}}(t||{});this._(t,n.funcName);const e=nt(tt(n.kmacKey),this.p>>>3);for(let t=0;t<e.length;t+=this.p>>>5)this.C=this.R(e.slice(t,t+(this.p>>>5)),this.C),this.l+=this.p;this.A=!0}X(t){const n=u({value:this.o.slice(),binLen:this.h},function(t){let n,e,r=0;const i=[0,0],s=[4294967295&t,t/4294967296&2097151];for(n=6;n>=0;n--)e=s[n>>2]>>>8*n&255,0===e&&0===r||(i[r>>2]|=e<<8*r,r+=1);return r=0!==r?r:1,i[r>>2]|=r<<8*r,{value:r+1>4?i:[i[0]],binLen:8+8*r}}(t.outputLen));return this.F(n.value,n.binLen,this.l,this.g(this.C),t.outputLen)}}export default class{constructor(t,n,e){if(\"SHA-1\"==t)this.O=new K(t,n,e);else if(\"SHA-224\"==t||\"SHA-256\"==t)this.O=new g(t,n,e);else if(\"SHA-384\"==t||\"SHA-512\"==t)this.O=new q(t,n,e);else{if(\"SHA3-224\"!=t&&\"SHA3-256\"!=t&&\"SHA3-384\"!=t&&\"SHA3-512\"!=t&&\"SHAKE128\"!=t&&\"SHAKE256\"!=t&&\"CSHAKE128\"!=t&&\"CSHAKE256\"!=t&&\"KMAC128\"!=t&&\"KMAC256\"!=t)throw new Error(h);this.O=new et(t,n,e)}}update(t){this.O.update(t)}getHash(t,n){return this.O.getHash(t,n)}setHMACKey(t,n,e){this.O.setHMACKey(t,n,e)}getHMAC(t,n){return this.O.getHMAC(t,n)}}\n//# sourceMappingURL=sha.mjs.map\n","import jsSHA from 'jssha';\n\nimport { InternalUtils } from './utils';\n\nlet randomBytes;\nlet hmacDigest;\nlet timingSafeEqual;\n\nif (InternalUtils.isNode) {\n\tconst NodeBuffer = InternalUtils.globalThis.Buffer;\n\tconst NodeCrypto = InternalUtils.nodeRequire('crypto');\n\n\trandomBytes = size => {\n\t\tconst bytes = NodeCrypto.randomBytes(size);\n\t\treturn bytes.buffer;\n\t};\n\n\thmacDigest = (algorithm, key, message) => {\n\t\tconst hmac = NodeCrypto.createHmac(algorithm, NodeBuffer.from(key));\n\t\thmac.update(NodeBuffer.from(message));\n\t\treturn hmac.digest().buffer;\n\t};\n\n\ttimingSafeEqual = (a, b) => {\n\t\treturn NodeCrypto.timingSafeEqual(NodeBuffer.from(a), NodeBuffer.from(b));\n\t};\n} else {\n\tconst BrowserCrypto = InternalUtils.globalThis.crypto || InternalUtils.globalThis.msCrypto;\n\n\tlet getRandomValues;\n\tif (typeof BrowserCrypto !== 'undefined' && typeof BrowserCrypto.getRandomValues === 'function') {\n\t\tgetRandomValues = array => {\n\t\t\tBrowserCrypto.getRandomValues(array);\n\t\t};\n\t} else {\n\t\tInternalUtils.console.warn('Cryptography API not available, falling back to \\'Math.random\\'...');\n\t\tgetRandomValues = array => {\n\t\t\tfor (let i = 0; i < array.length; i++) {\n\t\t\t\tarray[i] = Math.floor(Math.random() * 256);\n\t\t\t}\n\t\t};\n\t}\n\n\trandomBytes = size => {\n\t\tconst bytes = new Uint8Array(size);\n\t\tgetRandomValues(bytes);\n\t\treturn bytes.buffer;\n\t};\n\n\thmacDigest = (algorithm, key, message) => {\n\t\tconst variant = ({\n\t\t\tSHA1: 'SHA-1',\n\t\t\tSHA224: 'SHA-224',\n\t\t\tSHA256: 'SHA-256',\n\t\t\tSHA384: 'SHA-384',\n\t\t\tSHA512: 'SHA-512',\n\t\t\t'SHA3-224': 'SHA3-224',\n\t\t\t'SHA3-256': 'SHA3-256',\n\t\t\t'SHA3-384': 'SHA3-384',\n\t\t\t'SHA3-512': 'SHA3-512'\n\t\t})[algorithm.toUpperCase()];\n\t\tif (typeof variant === 'undefined') {\n\t\t\tthrow new TypeError('Unknown hash function');\n\t\t}\n\t\t// eslint-disable-next-line new-cap\n\t\tconst hmac = new jsSHA(variant, 'ARRAYBUFFER');\n\t\thmac.setHMACKey(key, 'ARRAYBUFFER');\n\t\thmac.update(message);\n\t\treturn hmac.getHMAC('ARRAYBUFFER');\n\t};\n\n\ttimingSafeEqual = (a, b) => {\n\t\tif (a.length !== b.length) {\n\t\t\tthrow new TypeError('Input strings must have the same length');\n\t\t}\n\t\tlet i = -1;\n\t\tlet out = 0;\n\t\twhile (++i < a.length) {\n\t\t\tout |= a.charCodeAt(i) ^ b.charCodeAt(i);\n\t\t}\n\t\treturn out === 0;\n\t};\n}\n\n/**\n * An object containing some cryptography functions with dirty workarounds for Node.js and browsers.\n * @private\n * @type {Object}\n */\nexport const Crypto = {\n\n\t/**\n\t * Returns random bytes.\n\t * @param {number} size Size.\n\t * @returns {ArrayBuffer} Random bytes.\n\t */\n\trandomBytes,\n\n\t/**\n\t * Calculates an HMAC digest.\n\t * In Node.js, the command `openssl list -digest-algorithms` displays the available digest algorithms.\n\t * @param {string} algorithm Algorithm.\n\t * @param {ArrayBuffer} key Key.\n\t * @param {ArrayBuffer} message Message.\n\t * @returns {ArrayBuffer} Digest.\n\t */\n\thmacDigest,\n\n\t/**\n\t * Returns true if a is equal to b, without leaking timing information that would allow an attacker to guess one of the values.\n\t * @param {string} a String a.\n\t * @param {string} b String b.\n\t * @returns {boolean} Equality result.\n\t */\n\ttimingSafeEqual\n\n};\n","import { Utils } from './utils';\nimport { Crypto } from './crypto';\n\n/**\n * Secret key object.\n * @param {Object} [config] Configuration options.\n * @param {ArrayBuffer} [config.buffer=Crypto.randomBytes] Secret key.\n * @param {number} [config.size=20] Number of random bytes to generate, ignored if 'buffer' is provided.\n */\nexport class Secret {\n\tconstructor({ buffer, size = 20 } = {}) {\n\t\t/**\n\t\t * Secret key.\n\t\t * @type {ArrayBuffer}\n\t\t */\n\t\tthis.buffer = typeof buffer === 'undefined'\n\t\t\t? Crypto.randomBytes(size)\n\t\t\t: buffer;\n\t}\n\n\t/**\n\t * Converts a raw string to a Secret object.\n\t * @param {string} str Raw string.\n\t * @returns {Secret} Secret object.\n\t */\n\tstatic fromRaw(str) {\n\t\treturn new Secret({ buffer: Utils.raw.toBuf(str) });\n\t}\n\n\t/**\n\t * Converts a base32 string to a Secret object.\n\t * @param {string} str Base32 string.\n\t * @returns {Secret} Secret object.\n\t */\n\tstatic fromB32(str) {\n\t\treturn new Secret({ buffer: Utils.b32.toBuf(str) });\n\t}\n\n\t/**\n\t * Converts a hexadecimal string to a Secret object.\n\t * @param {string} str Hexadecimal string.\n\t * @returns {Secret} Secret object.\n\t */\n\tstatic fromHex(str) {\n\t\treturn new Secret({ buffer: Utils.hex.toBuf(str) });\n\t}\n\n\t/**\n\t * String representation of secret key.\n\t * @type {string}\n\t */\n\tget raw() {\n\t\tObject.defineProperty(this, 'raw', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\twritable: true,\n\t\t\tvalue: Utils.raw.fromBuf(this.buffer)\n\t\t});\n\n\t\treturn this.raw;\n\t}\n\n\t/**\n\t * Base32 representation of secret key.\n\t * @type {string}\n\t */\n\tget b32() {\n\t\tObject.defineProperty(this, 'b32', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\twritable: true,\n\t\t\tvalue: Utils.b32.fromBuf(this.buffer)\n\t\t});\n\n\t\treturn this.b32;\n\t}\n\n\t/**\n\t * Hexadecimal representation of secret key.\n\t * @type {string}\n\t */\n\tget hex() {\n\t\tObject.defineProperty(this, 'hex', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\twritable: true,\n\t\t\tvalue: Utils.hex.fromBuf(this.buffer)\n\t\t});\n\n\t\treturn this.hex;\n\t}\n}\n","import { Utils } from './utils';\nimport { Crypto } from './crypto';\nimport { Secret } from './secret';\n\n/**\n * Default configuration.\n * @private\n * @type {Object}\n */\nconst defaults = {\n\tissuer: '',\n\tlabel: 'OTPAuth',\n\talgorithm: 'SHA1',\n\tdigits: 6,\n\tcounter: 0,\n\tperiod: 30,\n\twindow: 1\n};\n\n/**\n * HOTP: An HMAC-based One-time Password Algorithm (RFC 4226)\n * (https://tools.ietf.org/html/rfc4226).\n * @param {Object} [config] Configuration options.\n * @param {string} [config.issuer=''] Account provider.\n * @param {string} [config.label='OTPAuth'] Account label.\n * @param {Secret|string} [config.secret=Secret] Secret key.\n * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n * @param {number} [config.digits=6] Token length.\n * @param {number} [config.counter=0] Initial counter value.\n */\nexport class HOTP {\n\tconstructor({\n\t\tissuer = defaults.issuer,\n\t\tlabel = defaults.label,\n\t\tsecret = new Secret(),\n\t\talgorithm = defaults.algorithm,\n\t\tdigits = defaults.digits,\n\t\tcounter = defaults.counter\n\t} = {}) {\n\t\t/**\n\t\t * Account provider.\n\t\t * @type {string}\n\t\t */\n\t\tthis.issuer = issuer;\n\t\t/**\n\t\t * Account label.\n\t\t * @type {string}\n\t\t */\n\t\tthis.label = label;\n\t\t/**\n\t\t * Secret key.\n\t\t * @type {Secret}\n\t\t */\n\t\tthis.secret = typeof secret === 'string'\n\t\t\t? Secret.fromB32(secret)\n\t\t\t: secret;\n\t\t/**\n\t\t * HMAC hashing algorithm.\n\t\t * @type {string}\n\t\t */\n\t\tthis.algorithm = algorithm.toUpperCase();\n\t\t/**\n\t\t * Token length.\n\t\t * @type {number}\n\t\t */\n\t\tthis.digits = digits;\n\t\t/**\n\t\t * Initial counter value.\n\t\t * @type {number}\n\t\t */\n\t\tthis.counter = counter;\n\t}\n\n\t/**\n\t * Generates an HOTP token.\n\t * @param {Object} config Configuration options.\n\t * @param {Secret} config.secret Secret key.\n\t * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n\t * @param {number} [config.digits=6] Token length.\n\t * @param {number} [config.counter=0] Counter value.\n\t * @returns {string} Token.\n\t */\n\tstatic generate({\n\t\tsecret,\n\t\talgorithm = defaults.algorithm,\n\t\tdigits = defaults.digits,\n\t\tcounter = defaults.counter\n\t}) {\n\t\tconst digest = new Uint8Array(Crypto.hmacDigest(algorithm, secret.buffer, Utils.uint.toBuf(counter)));\n\t\tconst offset = digest[digest.byteLength - 1] & 15;\n\t\tconst otp = (\n\t\t\t((digest[offset] & 127) << 24)\n\t\t\t| ((digest[offset + 1] & 255) << 16)\n\t\t\t| ((digest[offset + 2] & 255) << 8)\n\t\t\t| (digest[offset + 3] & 255)\n\t\t) % (10 ** digits);\n\n\t\treturn Utils.pad(otp, digits);\n\t}\n\n\t/**\n\t * Generates an HOTP token.\n\t * @param {Object} [config] Configuration options.\n\t * @param {number} [config.counter=this.counter++] Counter value.\n\t * @returns {string} Token.\n\t */\n\tgenerate({\n\t\tcounter = this.counter++\n\t} = {}) {\n\t\treturn HOTP.generate({\n\t\t\tsecret: this.secret,\n\t\t\talgorithm: this.algorithm,\n\t\t\tdigits: this.digits,\n\t\t\tcounter\n\t\t});\n\t}\n\n\t/**\n\t * Validates an HOTP token.\n\t * @param {Object} config Configuration options.\n\t * @param {string} config.token Token value.\n\t * @param {Secret} config.secret Secret key.\n\t * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n\t * @param {number} config.digits Token length.\n\t * @param {number} [config.counter=0] Counter value.\n\t * @param {number} [config.window=1] Window of counter values to test.\n\t * @returns {number|null} Token delta, or null if the token is not found.\n\t */\n\tstatic validate({\n\t\ttoken,\n\t\tsecret,\n\t\talgorithm,\n\t\tdigits,\n\t\tcounter = defaults.counter,\n\t\twindow = defaults.window\n\t}) {\n\t\t// Return early if the token length does not match the digit number.\n\t\tif (token.length !== digits) return null;\n\n\t\tlet delta = null;\n\n\t\tfor (let i = counter - window; i <= counter + window; ++i) {\n\t\t\tconst generatedToken = HOTP.generate({\n\t\t\t\tsecret,\n\t\t\t\talgorithm,\n\t\t\t\tdigits,\n\t\t\t\tcounter: i\n\t\t\t});\n\n\t\t\tif (Crypto.timingSafeEqual(token, generatedToken)) {\n\t\t\t\tdelta = i - counter;\n\t\t\t}\n\t\t}\n\n\t\treturn delta;\n\t}\n\n\t/**\n\t * Validates an HOTP token.\n\t * @param {Object} config Configuration options.\n\t * @param {string} config.token Token value.\n\t * @param {number} [config.counter=this.counter] Counter value.\n\t * @param {number} [config.window=1] Window of counter values to test.\n\t * @returns {number|null} Token delta, or null if the token is not found.\n\t */\n\tvalidate({\n\t\ttoken,\n\t\tcounter = this.counter,\n\t\twindow\n\t}) {\n\t\treturn HOTP.validate({\n\t\t\ttoken,\n\t\t\tsecret: this.secret,\n\t\t\talgorithm: this.algorithm,\n\t\t\tdigits: this.digits,\n\t\t\tcounter,\n\t\t\twindow\n\t\t});\n\t}\n\n\t/**\n\t * Returns a Google Authenticator key URI.\n\t * @returns {string} URI.\n\t */\n\ttoString() {\n\t\tconst e = encodeURIComponent;\n\t\treturn 'otpauth://hotp/'\n\t\t\t+ `${this.issuer.length > 0\n\t\t\t\t? `${e(this.issuer)}:${e(this.label)}?issuer=${e(this.issuer)}&`\n\t\t\t\t: `${e(this.label)}?`}`\n\t\t\t+ `secret=${e(this.secret.b32)}&`\n\t\t\t+ `algorithm=${e(this.algorithm)}&`\n\t\t\t+ `digits=${e(this.digits)}&`\n\t\t\t+ `counter=${e(this.counter)}`;\n\t}\n}\n\n/**\n * TOTP: Time-Based One-Time Password Algorithm (RFC 6238)\n * (https://tools.ietf.org/html/rfc6238).\n * @param {Object} [config] Configuration options.\n * @param {string} [config.issuer=''] Account provider.\n * @param {string} [config.label='OTPAuth'] Account label.\n * @param {Secret|string} [config.secret=Secret] Secret key.\n * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n * @param {number} [config.digits=6] Token length.\n * @param {number} [config.period=30] Token time-step duration.\n */\nexport class TOTP {\n\tconstructor({\n\t\tissuer = defaults.issuer,\n\t\tlabel = defaults.label,\n\t\tsecret = new Secret(),\n\t\talgorithm = defaults.algorithm,\n\t\tdigits = defaults.digits,\n\t\tperiod = defaults.period\n\t} = {}) {\n\t\t/**\n\t\t * Account provider.\n\t\t * @type {string}\n\t\t */\n\t\tthis.issuer = issuer;\n\t\t/**\n\t\t * Account label.\n\t\t * @type {string}\n\t\t */\n\t\tthis.label = label;\n\t\t/**\n\t\t * Secret key.\n\t\t * @type {Secret}\n\t\t */\n\t\tthis.secret = typeof secret === 'string'\n\t\t\t? Secret.fromB32(secret)\n\t\t\t: secret;\n\t\t/**\n\t\t * HMAC hashing algorithm.\n\t\t * @type {string}\n\t\t */\n\t\tthis.algorithm = algorithm.toUpperCase();\n\t\t/**\n\t\t * Token length.\n\t\t * @type {number}\n\t\t */\n\t\tthis.digits = digits;\n\t\t/**\n\t\t * Token time-step duration.\n\t\t * @type {number}\n\t\t */\n\t\tthis.period = period;\n\t}\n\n\t/**\n\t * Generates a TOTP token.\n\t * @param {Object} config Configuration options.\n\t * @param {Secret} config.secret Secret key.\n\t * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n\t * @param {number} [config.digits=6] Token length.\n\t * @param {number} [config.period=30] Token time-step duration.\n\t * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n\t * @returns {string} Token.\n\t */\n\tstatic generate({\n\t\tsecret,\n\t\talgorithm,\n\t\tdigits,\n\t\tperiod = defaults.period,\n\t\ttimestamp = Date.now()\n\t}) {\n\t\treturn HOTP.generate({\n\t\t\tsecret,\n\t\t\talgorithm,\n\t\t\tdigits,\n\t\t\tcounter: Math.floor(timestamp / 1000 / period)\n\t\t});\n\t}\n\n\t/**\n\t * Generates a TOTP token.\n\t * @param {Object} [config] Configuration options.\n\t * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n\t * @returns {string} Token.\n\t */\n\tgenerate({\n\t\ttimestamp = Date.now()\n\t} = {}) {\n\t\treturn TOTP.generate({\n\t\t\tsecret: this.secret,\n\t\t\talgorithm: this.algorithm,\n\t\t\tdigits: this.digits,\n\t\t\tperiod: this.period,\n\t\t\ttimestamp\n\t\t});\n\t}\n\n\t/**\n\t * Validates a TOTP token.\n\t * @param {Object} config Configuration options.\n\t * @param {string} config.token Token value.\n\t * @param {Secret} config.secret Secret key.\n\t * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n\t * @param {number} config.digits Token length.\n\t * @param {number} [config.period=30] Token time-step duration.\n\t * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n\t * @param {number} [config.window=1] Window of counter values to test.\n\t * @returns {number|null} Token delta, or null if the token is not found.\n\t */\n\tstatic validate({\n\t\ttoken,\n\t\tsecret,\n\t\talgorithm,\n\t\tdigits,\n\t\tperiod = defaults.period,\n\t\ttimestamp = Date.now(),\n\t\twindow\n\t}) {\n\t\treturn HOTP.validate({\n\t\t\ttoken,\n\t\t\tsecret,\n\t\t\talgorithm,\n\t\t\tdigits,\n\t\t\tcounter: Math.floor(timestamp / 1000 / period),\n\t\t\twindow\n\t\t});\n\t}\n\n\t/**\n\t * Validates a TOTP token.\n\t * @param {Object} config Configuration options.\n\t * @param {string} config.token Token value.\n\t * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n\t * @param {number} [config.window=1] Window of counter values to test.\n\t * @returns {number|null} Token delta, or null if the token is not found.\n\t */\n\tvalidate({\n\t\ttoken,\n\t\ttimestamp,\n\t\twindow\n\t}) {\n\t\treturn TOTP.validate({\n\t\t\ttoken,\n\t\t\tsecret: this.secret,\n\t\t\talgorithm: this.algorithm,\n\t\t\tdigits: this.digits,\n\t\t\tperiod: this.period,\n\t\t\ttimestamp,\n\t\t\twindow\n\t\t});\n\t}\n\n\t/**\n\t * Returns a Google Authenticator key URI.\n\t * @returns {string} URI.\n\t */\n\ttoString() {\n\t\tconst e = encodeURIComponent;\n\t\treturn 'otpauth://totp/'\n\t\t\t+ `${this.issuer.length > 0\n\t\t\t\t? `${e(this.issuer)}:${e(this.label)}?issuer=${e(this.issuer)}&`\n\t\t\t\t: `${e(this.label)}?`}`\n\t\t\t+ `secret=${e(this.secret.b32)}&`\n\t\t\t+ `algorithm=${e(this.algorithm)}&`\n\t\t\t+ `digits=${e(this.digits)}&`\n\t\t\t+ `period=${e(this.period)}`;\n\t}\n}\n","import { Utils } from './utils';\nimport { Secret } from './secret';\nimport { HOTP, TOTP } from './otp';\n\n/**\n * Key URI regex.\n *   otpauth://TYPE/[ISSUER:]LABEL?PARAMETERS\n * @private\n * @type {RegExp}\n */\nconst OTPURI_REGEX = /^otpauth:\\/\\/([ht]otp)\\/(.+)\\?((?:&?[A-Z0-9.~_-]+=[^&]*)+)$/i;\n\n/**\n * RFC 4648 base32 alphabet with pad.\n * @private\n * @type {string}\n */\nconst SECRET_REGEX = /^[2-7A-Z]+=*$/i;\n\n/**\n * Regex for supported algorithms.\n * @private\n * @type {RegExp}\n */\nconst ALGORITHM_REGEX = /^SHA(?:1|224|256|384|512|3-224|3-256|3-384|3-512)$/i;\n\n/**\n * Integer regex.\n * @private\n * @type {RegExp}\n */\nconst INTEGER_REGEX = /^[+-]?\\d+$/;\n\n/**\n * Positive integer regex.\n * @private\n * @type {RegExp}\n */\nconst POSITIVE_INTEGER_REGEX = /^\\+?[1-9]\\d*$/;\n\n/**\n * HOTP/TOTP object/string conversion\n * (https://github.com/google/google-authenticator/wiki/Key-Uri-Format).\n */\nexport class URI {\n\t/**\n\t * Parses a Google Authenticator key URI and returns an HOTP/TOTP object.\n\t * @param {string} uri Google Authenticator Key URI.\n\t * @returns {HOTP|TOTP} HOTP/TOTP object.\n\t */\n\tstatic parse(uri) {\n\t\tlet uriGroups;\n\n\t\ttry {\n\t\t\turiGroups = uri.match(OTPURI_REGEX);\n\t\t} catch (error) { /* Handled below */ }\n\n\t\tif (!Array.isArray(uriGroups)) {\n\t\t\tthrow new URIError('Invalid URI format');\n\t\t}\n\n\t\t// Extract URI groups.\n\t\tconst uriType = uriGroups[1].toLowerCase();\n\t\tconst uriLabel = uriGroups[2].split(/:(.+)/, 2).map(decodeURIComponent);\n\t\tconst uriParams = uriGroups[3].split('&').reduce((acc, cur) => {\n\t\t\tconst pairArr = cur.split(/=(.*)/, 2).map(decodeURIComponent);\n\t\t\tconst pairKey = pairArr[0].toLowerCase();\n\t\t\tconst pairVal = pairArr[1];\n\t\t\tconst pairAcc = acc;\n\n\t\t\tpairAcc[pairKey] = pairVal;\n\t\t\treturn pairAcc;\n\t\t}, {});\n\n\t\t// 'OTP' will be instantiated with 'config' argument.\n\t\tlet OTP;\n\t\tconst config = {};\n\n\t\tif (uriType === 'hotp') {\n\t\t\tOTP = HOTP;\n\n\t\t\t// Counter: required\n\t\t\tif (typeof uriParams.counter !== 'undefined' && INTEGER_REGEX.test(uriParams.counter)) {\n\t\t\t\tconfig.counter = parseInt(uriParams.counter, 10);\n\t\t\t} else {\n\t\t\t\tthrow new TypeError('Missing or invalid \\'counter\\' parameter');\n\t\t\t}\n\t\t} else if (uriType === 'totp') {\n\t\t\tOTP = TOTP;\n\n\t\t\t// Period: optional\n\t\t\tif (typeof uriParams.period !== 'undefined') {\n\t\t\t\tif (POSITIVE_INTEGER_REGEX.test(uriParams.period)) {\n\t\t\t\t\tconfig.period = parseInt(uriParams.period, 10);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new TypeError('Invalid \\'period\\' parameter');\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Unknown OTP type');\n\t\t}\n\n\t\t// Label: required\n\t\t// Issuer: optional\n\t\tif (uriLabel.length === 2) {\n\t\t\tconfig.label = uriLabel[1];\n\t\t\tif (typeof uriParams.issuer === 'undefined') {\n\t\t\t\tconfig.issuer = uriLabel[0];\n\t\t\t} else if (uriParams.issuer === uriLabel[0]) {\n\t\t\t\tconfig.issuer = uriParams.issuer;\n\t\t\t} else {\n\t\t\t\tthrow new TypeError('Invalid \\'issuer\\' parameter');\n\t\t\t}\n\t\t} else {\n\t\t\tconfig.label = uriLabel[0];\n\t\t\tif (typeof uriParams.issuer !== 'undefined') {\n\t\t\t\tconfig.issuer = uriParams.issuer;\n\t\t\t}\n\t\t}\n\n\t\t// Secret: required\n\t\tif (typeof uriParams.secret !== 'undefined' && SECRET_REGEX.test(uriParams.secret)) {\n\t\t\tconfig.secret = new Secret({ buffer: Utils.b32.toBuf(uriParams.secret) });\n\t\t} else {\n\t\t\tthrow new TypeError('Missing or invalid \\'secret\\' parameter');\n\t\t}\n\n\t\t// Algorithm: optional\n\t\tif (typeof uriParams.algorithm !== 'undefined') {\n\t\t\tif (ALGORITHM_REGEX.test(uriParams.algorithm)) {\n\t\t\t\tconfig.algorithm = uriParams.algorithm;\n\t\t\t} else {\n\t\t\t\tthrow new TypeError('Invalid \\'algorithm\\' parameter');\n\t\t\t}\n\t\t}\n\n\t\t// Digits: optional\n\t\tif (typeof uriParams.digits !== 'undefined') {\n\t\t\tif (POSITIVE_INTEGER_REGEX.test(uriParams.digits)) {\n\t\t\t\tconfig.digits = parseInt(uriParams.digits, 10);\n\t\t\t} else {\n\t\t\t\tthrow new TypeError('Invalid \\'digits\\' parameter');\n\t\t\t}\n\t\t}\n\n\t\treturn new OTP(config);\n\t}\n\n\t/**\n\t * Converts an HOTP/TOTP object to a Google Authenticator key URI.\n\t * @param {HOTP|TOTP} otp HOTP/TOTP object.\n\t * @param {Object} [config] Configuration options.\n\t * @returns {string} Google Authenticator Key URI.\n\t */\n\tstatic stringify(otp) {\n\t\tif (otp instanceof HOTP || otp instanceof TOTP) {\n\t\t\treturn otp.toString();\n\t\t}\n\n\t\tthrow new TypeError('Invalid \\'HOTP/TOTP\\' object');\n\t}\n}\n","/**\n * Library version.\n * @type {string}\n */\nexport const version = '__OTPAUTH_VERSION__';\n"],"names":["Utils","uint","fromBuf","buf","arr","Uint8Array","num","i","length","toBuf","ArrayBuffer","acc","raw","str","String","fromCharCode","charCodeAt","b32","alphabet","bits","value","toUpperCase","replace","index","idx","indexOf","TypeError","hex","toString","j","parseInt","substr","pad","digits","prefix","repeat","InternalUtils","_globalThis","globalThis","Object","defineProperty","prototype","get","this","configurable","__magicalGlobalThis__","self","window","global","enumerable","_console","methods","_typeof","console","method","_isNode","call","process","isNode","_nodeRequire","eval","nodeRequire","b64Tab","uint8array2packed","existingPacked","existingPackedLen","bigEndianMod","intOffset","byteOffset","packed","existingByteLen","shiftModifier","push","binLen","getStrConverter","format","utfType","Error","existingBin","existingBinLen","isNaN","codePnt","codePntArr","transposeBytes","byteCnt","tmpInt","strPart","firstEqual","search","charAt","ignore","getOutputConverter","outputBinLen","outputOptions","binarray","outputLength","formatOpts","srcByte","outputUpper","triplet","int1","int2","b64Pad","retVal","arrView","randomBytes","hmacDigest","timingSafeEqual","NodeBuffer","Buffer","NodeCrypto","size","buffer","algorithm","key","message","hmac","createHmac","from","update","digest","a","b","BrowserCrypto","crypto","msCrypto","getRandomValues","array","warn","Math","floor","random","bytes","variant","SHA1","SHA224","SHA256","SHA384","SHA512","jsSHA","setHMACKey","getHMAC","out","Crypto","Secret","writable","defaults","issuer","label","counter","period","HOTP","secret","fromB32","generate","token","validate","e","encodeURIComponent","offset","byteLength","otp","delta","generatedToken","TOTP","timestamp","Date","now","OTPURI_REGEX","SECRET_REGEX","ALGORITHM_REGEX","INTEGER_REGEX","POSITIVE_INTEGER_REGEX","URI","uri","uriGroups","match","error","Array","isArray","URIError","OTP","uriType","toLowerCase","uriLabel","split","map","decodeURIComponent","uriParams","reduce","cur","pairArr","pairKey","pairVal","pairAcc","config","test","version"],"mappings":"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"}